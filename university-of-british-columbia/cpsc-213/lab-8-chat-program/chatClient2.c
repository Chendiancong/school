// chatClient.c// the main function of your chatServer#include <stdio.h>#include <signal.h>#include <errno.h>#include <unistd.h>#include <stdlib.h>#include <string.h>#include "Socket.h"#include "Thread.h"#include "Packet.h"#include "socketStruct.h"// The function of the chatClient is to read input from standard// input, typically the keyboard and write it to the server// it connected to. At the same time the application is reading from// the connection to the server and writes whatever is read from the// network to standard output.// The passed in parameter is the result of  createClientSocket.void *networkReader (void *param){  // Add code and declarations here to read information the socket  // connected to the server and write it to standard output. Upon  // getting and EOF from the server terminate the application.  struct Socket *soc = (struct Socket *) param;  int bytes_received = 0;  PACKET *packet = malloc(sizeof(PACKET));  int receivedCont = 0;  while (1)  {    if (soc && (soc->sType == ACTIVE_SOCKET))    {      bytes_received = socketRecv (soc, packet, sizeof (PACKET));      if (bytes_received < 0)      {        bytes_received = socketClose (soc);	// close socket, terminate connection.        if (bytes_received < 0) // error check        {          printf ("Client: close error.\n");          exit(-1);        }  // inner if statement      perror ("Client: receive error.\n");      exit(-1);      }  // outter if statement      if (bytes_received == 0)      {        printf ("Client: Server shut down!\n");        exit(-1);      }  // if statement      if (receivedCont == 0)      {        if (packet->ptype != CONTINUE)          continue;        else          receivedCont = 1;      }  // if statement      packet->data[bytes_received] = '\0';      if (packet->ptype == DISPLAY)         printf ("%s\n", packet->data);    }  // outter if statement    else      printf ("Client: connection failed\n");  }  // while loop    // clean up  free (soc);  soc = NULL;  return NULL;}  // networkReader// This program takes 3 command line arguments in the following order://            1) An string that this client is to be known by (this is//               not used for this part of the assignment)//            2) The machine the server is on. This name can be in DNS//                or dotted IP (i.e. 127.8.9.131) format.//            3) The port the server is running on// A sample command line might look like these://    chatClient CS213 remote.ugrad.cs.ubc.ca  3678//    chatClient DA    127.0.0.1    4589// int main (int argc, char *argv[]){  // handle SIGPIPE  if (signal (SIGPIPE, SIG_IGN) == SIG_ERR)  {    perror ("sigHandle, SIGPIPE cannot be handled.");    exit (-1);  }  // if statement  printf ("SIGPIPE set to ignore.%d\n", SIGPIPE);  // Create a client socket connected to the server. Add the code and  // declarations below here.   char *hostname;  int port;  if (argc != 4)  {    printf ("Usage: testClient <hostname> <port>");    return -1;  }  // if statement  hostname = argv[2];  port = atoi (argv[3]);  // create client socket  struct Socket *soc = createClientSocket (hostname, port);  if (soc == NULL) // error check  {    printf ("Client: could not construct socket");    return 0;  }  // if statement  // Create and start a thread running the networkReader code to  // handle the input coming across the network. Add the code and  // declarations below here.   // create new networkReader thread  void *thread = createThread (networkReader, soc);  runThread (thread, NULL); // run thread  detachThread (thread); // detach thread  // Once the thread is running have this execution stream loop reading  // information from standard input and writing it to the server connection.  //  You may assume a maximum read size of  128 bytes from standard  // input. Add the code and declarations below here.   PACKET *packet = malloc(sizeof(PACKET));  packet->ptype = HELLO;  int i;  int bytes_sent;    for (i = 0; i < strlen (argv[1]); i++)    packet->data[i] = argv[1][i];  packet->data[i + 1] = '\0';  packet->data_len = strlen(argv[1]);  printf ("*You have entered the conversation.\n");    for ( ; ; )  {    if (soc && (soc->sType == ACTIVE_SOCKET))    {      if (strcmp(packet->data, "Quit") == 0)      {        packet->ptype = BYE;        packet->data_len = 0;      }  // if statement      bytes_sent = socketSend (soc, packet, sizeof(PACKET));            if (bytes_sent < 0) // error checking      {        perror ("Client: send error.\n");        return bytes_sent;      }  // if statement    }  // outter if statement    else      printf ("Client: connection failed\n");        gets (packet->data); // read standard input    packet->ptype = MSG;    packet->data_len = strlen(packet->data);  }  // for loop  return 0;}  // main