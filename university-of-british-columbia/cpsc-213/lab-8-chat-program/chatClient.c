// chatClient.c// the main function of your chatServer#include <stdio.h>#include <signal.h>#include <errno.h>#include <unistd.h>#include <stdlib.h>#include <string.h>#include "Socket.h"#include "Thread.h"#include "Packet.h"#include "socketStruct.h"const int MAX_MESSAGE = 1024;// The function of the chatClient is to read input from standard// input, typically the keyboard and write it to the server// it connected to. At the same time the application is reading from// the connection to the server and writes whatever is read from the// network to standard output.// The passed in parameter is the result of  createClientSocket.void *networkReader (void *param){  // Add code and declarations here to read information the socket  // connected to the server and write it to standard output. Upon  // getting and EOF from the server terminate the application.  struct Socket *soc = (struct Socket *) param;  char message_receive[MAX_MESSAGE];  int bytes_received = 0;  for ( ; ; )  {    message_receive [0] = '\0';    if (soc && (soc->sType == ACTIVE_SOCKET))    {      bytes_received = socketRecv (soc, message_receive, MAX_MESSAGE);      if (bytes_received < 0)      {        bytes_received = socketClose (soc);        if (bytes_received <= 0)        {          printf ("Client: close error.\n");          return (void*) bytes_received;        }  // if statement        printf ("Client: receive error.\n");        return (void*) bytes_received;      }  // if statement      if (bytes_received == 0)      {        printf ("Client: Server shut down!\n");        return (void*) -1;      }  // if statement      message_receive[bytes_received] = '\0';      printf ("^Message: %s\n", message_receive);    }  // if statement    else    {      printf ("Client: connection failed\n");    }  // else statement  }  // for loop  free (soc);  soc = NULL;  return NULL;}  // networkReader// This program takes 3 command line arguments in the following order://            1) An string that this client is to be known by (this is//               not used for this part of the assignment)//            2) The machine the server is on. This name can be in DNS//                or dotted IP (i.e. 127.8.9.131) format.//            3) The port the server is running on// A sample command line might look like these://    chatClient CS213 remote.ugrad.cs.ubc.ca  3678//    chatClient DA    127.0.0.1    4589// int main (int argc, char *argv[]){  // handle SIGPIPE  if (signal (SIGPIPE, SIG_IGN) == SIG_ERR)  {    perror ("sigHandle, SIGPIPE cannot be handled.");    exit (-1);  }  // if statement  printf ("SIGPIPE set to ignore.%d\n", SIGPIPE);  // Create a client socket connected to the server. Add the code and  // declarations below here.   char message_send[MAX_MESSAGE];  char *hostname;  int port;  int bytes_sent;  if (argc != 3)  {    printf ("Usage: testClient <hostname> <port>");    return -1;  }  // if statement  hostname = argv[1];  port = atoi (argv[2]);  printf ("Client: Calling createClientSocket(\"%s\", %d)\n", hostname, port);  struct Socket *soc = createClientSocket (hostname, port);  if (soc == NULL)  {    printf ("Client: could not construct socket\n");    return 0;  }  // if statement  // Create and start a thread running the networkReader code to  // handle the input coming across the network. Add the code and  // declarations below here.   void *thread = createThread (networkReader, soc);  runThread (thread, NULL);  detachThread (thread);  // Once the thread is running have this execution stream loop reading  // information from standard input and writing it to the server connection.  //  You may assume a maximum read size of  128 bytes from standard  // input. Add the code and declarations below here.   for ( ; ; )  {    if (soc && (soc->sType == ACTIVE_SOCKET))    {      gets (message_send);      bytes_sent = socketSend (soc, message_send, strlen (message_send));      if (bytes_sent < 0)      {        perror ("Client: send error.\n");        return bytes_sent;      }  // inner if statement    }  // outter if statement    else    {      printf ("Client: connection failed\n");    }  // else statement  }  // for loop  return 0;}  // main