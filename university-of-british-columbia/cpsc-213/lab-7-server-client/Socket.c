#include <stdio.h>#include <stdlib.h>#include <string.h>#include <netdb.h>#include <netinet/in.h>		// for inet_ntoa#include <arpa/inet.h>		// for inet_ntoa#include <unistd.h>#include "Socket.h"#include "SocketStruct.h"const int LOWER_NUM_LIMIT = 48;const int UPPER_NUM_LIMIT = 58;// Implement the functions specified below.  You may add additional// functions if required, but they cannot be used by code outside of// this file. Make sure to add comments before each routine describing// what it does and what the parameters are for. It should go without// saying that your code within in each function should be// appropriately documented.struct Socket *createServerSocket(const int port){  struct Socket *new_socket = malloc (sizeof (struct Socket));  memset (new_socket, 0, sizeof (struct Socket));  new_socket->sockFD = socket (PF_INET, SOCK_STREAM, 0);  if (new_socket->sockFD < 0)		// checks if socket file   {					// descriptor is valid    free (new_socket);    return NULL;  }  // if statement    struct sockaddr_in socket_in;  socket_in.sin_family = PF_INET;  socket_in.sin_addr.s_addr = htonl (INADDR_ANY);  socket_in.sin_port = htons (port);  new_socket->remoteSockAddr = socket_in;  new_socket->sType = LISTENING_SOCKET;    if ((bind (new_socket->sockFD, 			// checks if       (struct sockaddr*) &(new_socket->remoteSockAddr),	// 'bind' is      sizeof (struct sockaddr_in))) < 0)		// successful  {    free (new_socket);    return NULL;  }  // if statement    listen (new_socket->sockFD, 10);  	// queue up to 10 connections    return new_socket;}struct Socket *createClientSocket(const char *hostname, const int port) {  struct Socket *new_socket = malloc (sizeof (struct Socket));  memset (new_socket, 0, sizeof (struct Socket));  char *temp_name = malloc (sizeof(char)*strlen(hostname));  memcpy (temp_name, hostname, sizeof(char)*strlen(hostname));  struct hostent *host_address;  int is_DNS = 0;    while (*temp_name)  {    if ((hostname[0] < 48 || hostname[0] > 58) && hostname[0] != '.')    {      is_DNS = 1;      host_address = gethostbyname (hostname);      if (host_address == NULL)      {        free (new_socket);        return NULL;        break;      }  // inner if statement    }  // if statement    temp_name++;  }  // while loop  if (is_DNS)  {    inet_pton (PF_INET,		 inet_ntoa (*((struct in_addr *) host_address->h_addr)),		 &new_socket->remoteSockAddr.sin_addr);    printf ("Hostname is a DNS converted to IP Address: %s\n", temp_name);  }  // if statement  else  {    inet_pton (PF_INET, hostname, &new_socket->remoteSockAddr.sin_addr);    printf ("IP Address: %s\n", temp_name);  }  // else statement  new_socket->remoteSockAddr.sin_family = PF_INET;  new_socket->remoteSockAddr.sin_port = htons (port);  new_socket->sType = ACTIVE_SOCKET;  new_socket->sockFD = socket (PF_INET, SOCK_STREAM, 0);  if (new_socket->sockFD < 0)		// checks if socket file  {					// descriptor is valid    free (new_socket);    return NULL;  }  if ((connect (new_socket->sockFD,       (void *) &new_socket->remoteSockAddr,      sizeof (struct sockaddr_in))) != 0)  {    free (new_socket);    return NULL;  }  // if statement  return new_socket;}struct Socket *socketAccept(struct Socket *listen_socket){  struct Socket *new_socket = malloc (sizeof (struct Socket));  int socket_in_size = sizeof (struct sockaddr_in);  new_socket->sType = ACTIVE_SOCKET;  new_socket->sockFD = accept (listen_socket->sockFD,	                       (struct sockaddr *) &(new_socket->remoteSockAddr), 			       &socket_in_size);  if (new_socket->sockFD < 0)		// checks if the socket file  {					// descriptor is valid    free (new_socket);    return NULL;  }  // if statement  return new_socket;}int socketRecv(struct Socket * soc, void *buf, int bufSize){  if (soc == NULL)    return -1000;    if (soc->sType != ACTIVE_SOCKET)    return -1001;    int bytes_received = recv (soc->sockFD, buf, bufSize, 0);    return bytes_received;}int socketSend(struct Socket * soc, const void *msg, const int msgSize) {  if (soc == NULL)    return -1000;    if (soc->sType != ACTIVE_SOCKET)    return -1002;    int bytes_sent = send (soc->sockFD, msg, msgSize, 0);  return bytes_sent;}int socketClose(struct Socket *soc) {  if (soc == NULL)    return -1001;    int closed_result = close (soc->sockFD);  return closed_result;}